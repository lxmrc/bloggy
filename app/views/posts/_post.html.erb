<div class="card mb-4">
  <div class="card-body">
    <h5 class="username-small"><%= link_to post.user.username, post.user, class: 'link-dark' %></h5>
    <%= image_tag post.image if post.image.attached? %>
    <p><%= post.content %></p>
  </div>
  <div class="card-footer text-muted">
    <%= link_to(post_path(post), class: 'link-dark') do %>
      <small><%= time_ago_in_words(post.created_at) %> ago &middot; 
      <span id="likes-<%= post.id %>"><%= pluralize(post.likes.count, 'like') %></span></small>
    <% end %>
    <div class="float-right">
      <%= link_to new_post_comment_path(post),
        class: 'btn btn-outline-primary btn-sm' do %>
        <i class="far fa-comment"></i>
      <% end %>
      <span id="like-unlike-<%= post.id %>">
        <% like = post.likes.find { |like| like.user == current_user } %>
        <% if like %>
          <%= render 'posts/unlike', post: post, like: like %>
        <% else %>
          <%= render 'posts/like', post: post %>
        <% end %>
      </span>
      <% if current_user == post.user %>
        <%= link_to edit_post_path(post), 
          class: 'btn btn-success btn-sm' do %>
          <i class="fas fa-pencil-alt"></i>
        <% end %>
        <%= link_to post_path(post), 
          method: :delete, 
          class: 'btn btn-secondary btn-sm',
          id: "delete-#{post.id}",
          data: { confirm: "are you sure you want to delete this post?" } do %>
          <i class="fas fa-trash-alt"></i>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
