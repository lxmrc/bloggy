<div class="card mb-4">
  <div class="card-body">
    <%= image_tag post.image if post.image.attached? %>
    <p><%= post.content %></p>
  </div>
  <div class="card-footer text-muted">
    <small><%= time_ago_in_words(post.created_at) %> ago &middot; 
    <span id="likes-<%= post.id %>"><%= pluralize(post.likes.count, 'like') %></span></small>
    <div class="float-right">
      <span id="like-unlike-<%= post.id %>">
        <% like = post.likes.find { |like| like.user == current_user } %>
        <% if like %>
          <%= render 'posts/unlike', post: post, like: like %>
        <% else %>
          <%= render 'posts/like', post: post %>
        <% end %>
      </span>
      <% if current_user == @user %>
        <%= link_to edit_post_path(post), 
          class: 'btn btn-success btn-sm' do %>
          <i class="fas fa-pencil-alt"></i>
        <% end %>
        <%= link_to post_path(post), 
          method: :delete, 
          class: 'btn btn-secondary btn-sm',
          id: "delete-#{post.id}",
          data: { confirm: "are you sure you want to delete this post?" } do %>
          <i class="fas fa-trash-alt"></i>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
